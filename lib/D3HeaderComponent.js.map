{"version":3,"sources":["../src/D3HeaderComponent.js"],"names":["d3","D3HeaderComponent","viewPortWidth","height","legendValues","maxValue","minValue","transformValue","val","includes","parseFloat","replace","data","map","x","push","ref","svgClientSize","svg","node","getBoundingClientRect","scale","scaleLinear","domain","min","max","range","width","xAxis","axisBottom","attr","append","call","marginTop","marginRight","marginLeft"],"mappings":";;;;;;AAAA;;;;AACA;;IAAYA,E;;AACZ;;;;;;AAEA,SAASC,iBAAT,OAMG;AAAA,MALDC,aAKC,QALDA,aAKC;AAAA,MAJDC,MAIC,QAJDA,MAIC;AAAA,MAHDC,YAGC,QAHDA,YAGC;AAAA,MAFDC,QAEC,QAFDA,QAEC;AAAA,MADDC,QACC,QADDA,QACC;;AACD,WAASC,cAAT,CAAwBC,GAAxB,EAA6B;AAC3B,QAAIA,QAAQ,EAAZ,EAAgB;AACd,aAAOF,QAAP;AACD;AACD,QAAIE,IAAIC,QAAJ,CAAa,GAAb,CAAJ,EAAuB;AACrB,aAAOC,WAAWF,IAAIG,OAAJ,CAAY,GAAZ,EAAiB,EAAjB,CAAX,IAAmC,IAA1C;AACD;AACD,QAAIH,IAAIC,QAAJ,CAAa,GAAb,CAAJ,EAAuB;AACrB,aAAOC,WAAWF,IAAIG,OAAJ,CAAY,GAAZ,EAAiB,EAAjB,CAAX,IAAmC,OAA1C;AACD;AACD,WAAOD,WAAWF,GAAX,CAAP;AACD;;AAED,MAAMI,OAAOR,aAAaS,GAAb,CAAiB;AAAA,WAAKN,eAAeO,CAAf,CAAL;AAAA,GAAjB,CAAb;AACAF,OAAKG,IAAL,CAAUV,QAAV;;AAEA,MAAMW,MAAM,mBACV,eAAO;AACL,QAAMC,gBAAgBC,IAAIC,IAAJ,GAAWC,qBAAX,EAAtB;AACA,QAAMC,QAAQrB,GACXsB,WADW,GAEXC,MAFW,CAEJ,CAACvB,GAAGwB,GAAH,CAAOZ,IAAP,CAAD,EAAeZ,GAAGyB,GAAH,CAAOb,IAAP,CAAf,CAFI,EAGXc,KAHW,CAGL,CAAC,CAAD,EAAIT,cAAcU,KAAlB,CAHK,CAAd;AAIA,QAAMC,QAAQ5B,GAAG6B,UAAH,GAAgBR,KAAhB,CAAsBA,KAAtB,CAAd;;AAEAH,QACGY,IADH,CACQ,OADR,EACiB5B,aADjB,EAEG4B,IAFH,CAEQ,QAFR,EAEkB3B,MAFlB,EAGG4B,MAHH,CAGU,GAHV,EAIGC,IAJH,CAIQJ,KAJR,EAKGE,IALH,CAKQ,cALR,EAKwB,CALxB,EAMGA,IANH,CAMQ,WANR;AAOD,GAhBS,EAiBV,CAAC1B,YAAD,CAjBU,CAAZ;;AAoBA,SACE;AACE,SAAKY,GADP;AAEE,WAAO;AACLb,cAAQA,MADH;AAELwB,aAAO,MAFF;AAGLM,iBAAW,KAHN;AAILC,mBAAa,KAJR;AAKLC,kBAAY;AALP;AAFT,IADF;AAYD;;kBAEclC,iB","file":"D3HeaderComponent.js","sourcesContent":["import React from 'react';\nimport * as d3 from 'd3';\nimport {useD3} from './d3hook.js';\n\nfunction D3HeaderComponent({\n  viewPortWidth,\n  height,\n  legendValues,\n  maxValue,\n  minValue,\n}) {\n  function transformValue(val) {\n    if (val === '') {\n      return minValue;\n    }\n    if (val.includes('k')) {\n      return parseFloat(val.replace('k', '')) * 1000;\n    }\n    if (val.includes('M')) {\n      return parseFloat(val.replace('M', '')) * 1000000;\n    }\n    return parseFloat(val);\n  }\n\n  const data = legendValues.map(x => transformValue(x));\n  data.push(maxValue);\n\n  const ref = useD3(\n    svg => {\n      const svgClientSize = svg.node().getBoundingClientRect();\n      const scale = d3\n        .scaleLinear()\n        .domain([d3.min(data), d3.max(data)])\n        .range([0, svgClientSize.width]);\n      const xAxis = d3.axisBottom().scale(scale);\n\n      svg\n        .attr('width', viewPortWidth)\n        .attr('height', height)\n        .append('g')\n        .call(xAxis)\n        .attr('stroke-width', 0)\n        .attr('transform', `translate(0, -2)`);\n    },\n    [legendValues]\n  );\n\n  return (\n    <svg\n      ref={ref}\n      style={{\n        height: height,\n        width: '100%',\n        marginTop: '0px',\n        marginRight: '0px',\n        marginLeft: '0px',\n      }}\n    ></svg>\n  );\n}\n\nexport default D3HeaderComponent;\n"]}