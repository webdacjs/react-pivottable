{"version":3,"sources":["../src/BarChartComponent.js"],"names":["BarChartComponent","index","value","thiskey","stacked","maxValsAttrs","minValsAttrs","barchartClassNames","showBarValues","showPopOver","popOverFormatter","rowkey","originalValues","valsAttrs","rowAttrs","formatPopOverValue","val","hovered","setHovered","popOverKeys","popOverValues","map","x","getPercentageFromValue","key","percValue","getBarValue","percentage","usePercentages","toFixed","getBarWrapperClassName","wrapper","getBarClassName","bars","width","barValue","minPerc","chartStyle","marginLeft","getStackedBar","getNonStackedBar","getPopOver","i"],"mappings":"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","file":"BarChartComponent.js","sourcesContent":["import React, {useState} from 'react';\nimport Popover from 'react-popover';\n\nexport default function BarChartComponent({\n  index,\n  value,\n  thiskey,\n  stacked,\n  maxValsAttrs,\n  minValsAttrs,\n  barchartClassNames,\n  showBarValues,\n  showPopOver,\n  popOverFormatter,\n  rowkey,\n  originalValues,\n  valsAttrs,\n  rowAttrs,\n}) {\n\n  const formatPopOverValue = val => popOverFormatter ? popOverFormatter(val) : val\n\n  const [hovered, setHovered] = useState(false);\n  const popOverKeys = [...rowAttrs, ...valsAttrs];\n  const popOverValues = [...rowkey, ...originalValues.map(x => formatPopOverValue(x))];\n\n  function getPercentageFromValue(value, key) {\n    const percValue = (value / maxValsAttrs[key]) * 100;\n    return percValue;\n  }\n\n  function getBarValue(value, percentage) {\n    if (!showBarValues || value === 0) {\n      return <span className=\"barChartLabel\"></span>;\n    }\n    if (usePercentages) {\n      return (\n        <span className=\"barChartLabel\">{`${percentage.toFixed(1)}%`}</span>\n      );\n    }\n    return <span className=\"barChartLabel\">{value}</span>;\n  }\n\n  const getBarWrapperClassName = () => {\n    if (barchartClassNames && barchartClassNames.wrapper) {\n      return barchartClassNames.wrapper;\n    }\n    return 'bar-chart-bar';\n  };\n\n  const getBarClassName = index => {\n    if (\n      barchartClassNames &&\n      barchartClassNames.bars &&\n      barchartClassNames.bars[index]\n    ) {\n      return barchartClassNames.bars[index];\n    }\n    return `bar bar${index + 1}`;\n  };\n\n  const width = getPercentageFromValue(value, thiskey);\n  const barValue = getBarValue(value, getPercentageFromValue(value, thiskey));\n\n  const minPerc =\n    minValsAttrs[thiskey] > 0\n      ? 0\n      : getPercentageFromValue(minValsAttrs[thiskey], thiskey) * -1;\n  const chartStyle =\n    width > 0\n      ? {width: `${width}%`, marginLeft: `${minPerc}%`}\n      : {width: `${width * -1}%`, marginLeft: `${minPerc - width * -1}%`};\n\n  const getStackedBar = () => (\n    <div\n      className={getBarClassName(index)}\n      style={chartStyle}\n      onMouseOver={() => setHovered(true)}\n      onMouseOut={() => setHovered()}\n    >\n      {barValue}\n    </div>\n  );\n\n  const getNonStackedBar = () => (\n    <div \n      className={getBarWrapperClassName()} \n      key={`bar-chart-${index}`}\n      onMouseOver={() => setHovered(true)}\n      onMouseOut={() => setHovered()}\n    >\n      <div className={getBarClassName(index)} style={chartStyle}>\n        {barValue}\n      </div>\n    </div>\n  );\n\n  const getPopOver = () => (\n    <div className=\"popoverBox\">\n      <table className='popOverBox-table'>\n        <tbody>\n          {popOverKeys.map((key, i) => (\n            <tr key={`tr-${i}`}>\n              <td className='popOverBox-table-cell' key={`tdk-${i}`}>\n                {key}:\n              </td>\n              <td className='popOverBox-table-cell' key={`tdv-${i}`}>\n                <b>{popOverValues[i]}</b>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n\n  return (\n    <Popover isOpen={showPopOver ? hovered : false} preferPlace={'below'} body={getPopOver()}>\n      {stacked && getStackedBar()}\n      {!stacked && getNonStackedBar()}\n    </Popover>\n  )\n}\n"]}